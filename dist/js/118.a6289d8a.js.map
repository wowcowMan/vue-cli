{"version":3,"file":"js/118.a6289d8a.js","mappings":"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","sources":["webpack://store-project/./src/views/UserCart.vue","webpack://store-project/./src/views/UserCart.vue?698a"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container\">\n    <div class=\"row mt-4\">\n      <div class=\"col-md-7\">\n        <table class=\"table align-middle\">\n          <thead>\n            <tr>\n              <th>圖片</th>\n              <th>商品名稱</th>\n              <th>價格</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in products\" :key=\"item.id\">\n              <td style=\"width: 200px\">\n                <div style=\"height: 100px; background-size: cover; background-position: center\"\n                  :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"></div>\n              </td>\n              <td><a href=\"#\" class=\"text-dark\">{{ item.title }}</a></td>\n              <td>\n                <div class=\"h5\" v-if=\"!item.price\">{{ item.origin_price }} 元</div>\n                <del class=\"h6\" v-if=\"item.price\">原價 {{ item.origin_price }} 元</del>\n                <div class=\"h5\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\n              </td>\n              <td>\n                <div class=\"btn-group btn-group-sm\">\n                  <button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"getProduct(item.id)\">\n                    查看更多\n                  </button>\n                  <button type=\"button\" class=\"btn btn-outline-danger\" :disabled=\"this.status.loadingItem === item.id\"\n                    @click=\"addCart(item.id)\">\n                    <div v-if=\"this.status.loadingItem === item.id\" class=\"spinner-grow spinner-grow-sm\" role=\"status\">\n                      <span class=\"visually-hidden\">Loading...</span>\n                    </div>\n                    加到購物車\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!-- 購物車列表 -->\n      <div class=\"col-md-5\">\n        <table class=\"table align-middle\">\n          <thead>\n            <tr>\n              <th>品名</th>\n              <th>數量</th>\n              <th></th>\n              <th>單價</th>\n            </tr>\n          </thead>\n          <template v-if=\"cart.carts\">\n            <tbody>\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                <td>\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" :disabled=\"status.loadingItem === item.id\"\n                    @click=\"removeCartItem(item.id)\">\n                    刪除\n                    <i class=\"bi bi-x\"></i>\n                  </button>\n                </td>\n                <td>\n                  {{ item.product.title }}\n                  <!-- <div class=\"text-success\" v-if=\"item.coupon\">\n                      已套用優惠券\n                    </div> -->\n                </td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    <input type=\"number\" class=\"form-control\" v-model.number=\"item.qty\">\n                    <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n                  </div>\n                </td>\n                <td class=\"text-end\">\n                  <!-- <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\">折扣價：</small> -->\n                  {{ $filter.currency(item.final_total) }}\n                </td>\n              </tr>\n            </tbody>\n          </template>\n          <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ $filter.currency(cart.total) }}</td>\n            </tr>\n            <tr v-if=\"cart.final_total !== cart.total\">\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n              <td class=\"text-end text-success\">{{ $filter.currency(cart.final_total) }}</td>\n            </tr>\n          </tfoot>\n        </table>\n        <div class=\"input-group mb-3 input-group-sm\">\n          <!-- <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\"> -->\n          <input type=\"text\" class=\"form-control\" placeholder=\"請輸入優惠碼\">\n          <div class=\"input-group-append\">\n            <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">\n              套用優惠碼\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      products: [],\n      cart: {},\n      // isLoading: false\n      status: {\n        loadingItem: ''\n      }\n    }\n  },\n  methods: {\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n      this.isLoading = true\n      this.$http.get(url).then((response) => {\n        this.products = response.data.products\n        console.log('products:', response)\n        this.isLoading = false\n      })\n    },\n    getProduct(id) {\n      this.$router.push(`/user/product/${id}`)\n    },\n    addCart(id) {\n      this.status.loadingItem = id\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      this.$http.post(url, { data: cart })\n        .then((response) => {\n          this.status.loadingItem = ''\n          console.log(response.data)\n          // this.$httpMessageState(response, '加入購物車')\n          // this.$router.push('/user/cart')\n        })\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      this.isLoading = true\n      this.$http.get(url).then((response) => {\n        console.log(response)\n        this.cart = response.data.data\n        this.isLoading = false\n      })\n    }\n  },\n  created() {\n    this.getProducts()\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=0654ee56\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/pengxiang/Desktop/vue3/store-project/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","href","role","_hoisted_15","colspan","type","placeholder","_createVNode","_component_Loading","active","_ctx","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_Fragment","_renderList","$data","products","item","key","id","_hoisted_6","_normalizeStyle","backgroundImage","imageUrl","_hoisted_7","_toDisplayString","title","price","_hoisted_8","origin_price","_hoisted_9","_hoisted_10","_hoisted_11","onClick","$event","$options","getProduct","_hoisted_12","disabled","status","loadingItem","addCart","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","cart","carts","_hoisted_20","removeCartItem","_hoisted_22","product","_hoisted_23","qty","_hoisted_25","unit","_hoisted_26","$filter","currency","final_total","_hoisted_27","_hoisted_28","total","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_cache","args","addCouponCode","data","methods","getProducts","url","this","$http","get","then","response","console","log","$router","push","product_id","post","getCart","created","__exports__","render"],"sourceRoot":""}
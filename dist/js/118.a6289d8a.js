"use strict";(self["webpackChunkstore_project"]=self["webpackChunkstore_project"]||[]).push([[118],{118:function(t,l,s){s.r(l),s.d(l,{default:function(){return G}});var n=s(3396),e=s(7139),a=s(9242);const i={class:"container"},o={class:"row mt-4"},d={class:"col-md-7"},c={class:"table align-middle"},r=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"圖片"),(0,n._)("th",null,"商品名稱"),(0,n._)("th",null,"價格"),(0,n._)("th")])],-1),u={style:{width:"200px"}},p={href:"#",class:"text-dark"},g={key:0,class:"h5"},_={key:1,class:"h6"},h={key:2,class:"h5"},b={class:"btn-group btn-group-sm"},w=["onClick"],m=["disabled","onClick"],k={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},y=(0,n._)("span",{class:"visually-hidden"},"Loading...",-1),v=[y],C={class:"col-md-5"},f={class:"table align-middle"},x=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"品名"),(0,n._)("th",null,"數量"),(0,n._)("th"),(0,n._)("th",null,"單價")])],-1),D={key:0},z=["disabled","onClick"],q=(0,n._)("i",{class:"bi bi-x"},null,-1),$={class:"input-group input-group-sm"},I=["onUpdate:modelValue"],L={class:"input-group-text"},U={class:"text-end"},P=(0,n._)("td",{colspan:"3",class:"text-end"},"總計",-1),j={class:"text-end"},H={key:0},Y=(0,n._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),K={class:"text-end text-success"},V={class:"input-group mb-3 input-group-sm"},W=(0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼"},null,-1),Z={class:"input-group-append"};function A(t,l,s,y,A,B){const E=(0,n.up)("Loading");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(E,{active:t.isLoading},null,8,["active"]),(0,n._)("div",i,[(0,n._)("div",o,[(0,n._)("div",d,[(0,n._)("table",c,[r,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(A.products,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",u,[(0,n._)("div",{style:(0,e.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,n._)("td",null,[(0,n._)("a",p,(0,e.zw)(t.title),1)]),(0,n._)("td",null,[t.price?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",g,(0,e.zw)(t.origin_price)+" 元",1)),t.price?((0,n.wg)(),(0,n.iD)("del",_,"原價 "+(0,e.zw)(t.origin_price)+" 元",1)):(0,n.kq)("",!0),t.price?((0,n.wg)(),(0,n.iD)("div",h,"現在只要 "+(0,e.zw)(t.price)+" 元",1)):(0,n.kq)("",!0)]),(0,n._)("td",null,[(0,n._)("div",b,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:l=>B.getProduct(t.id)}," 查看更多 ",8,w),(0,n._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===t.id,onClick:l=>B.addCart(t.id)},[this.status.loadingItem===t.id?((0,n.wg)(),(0,n.iD)("div",k,v)):(0,n.kq)("",!0),(0,n.Uk)(" 加到購物車 ")],8,m)])])])))),128))])])]),(0,n._)("div",C,[(0,n._)("table",f,[x,A.cart.carts?((0,n.wg)(),(0,n.iD)("tbody",D,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(A.cart.carts,(l=>((0,n.wg)(),(0,n.iD)("tr",{key:l.id},[(0,n._)("td",null,[(0,n._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:A.status.loadingItem===l.id,onClick:s=>t.removeCartItem(l.id)},[(0,n.Uk)(" 刪除 "),q],8,z)]),(0,n._)("td",null,(0,e.zw)(l.product.title)+" ",1),(0,n._)("td",null,[(0,n._)("div",$,[(0,n.wy)((0,n._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>l.qty=t},null,8,I),[[a.nr,l.qty,void 0,{number:!0}]]),(0,n._)("div",L,"/ "+(0,e.zw)(l.product.unit),1)])]),(0,n._)("td",U,(0,e.zw)(t.$filter.currency(l.final_total)),1)])))),128))])):(0,n.kq)("",!0),(0,n._)("tfoot",null,[(0,n._)("tr",null,[P,(0,n._)("td",j,(0,e.zw)(t.$filter.currency(A.cart.total)),1)]),A.cart.final_total!==A.cart.total?((0,n.wg)(),(0,n.iD)("tr",H,[Y,(0,n._)("td",K,(0,e.zw)(t.$filter.currency(A.cart.final_total)),1)])):(0,n.kq)("",!0)])]),(0,n._)("div",V,[W,(0,n._)("div",Z,[(0,n._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:l[0]||(l[0]=(...l)=>t.addCouponCode&&t.addCouponCode(...l))}," 套用優惠碼 ")])])])])])],64)}s(7658);var B={data(){return{products:[],cart:{},status:{loadingItem:""}}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/wowcowman-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,console.log("products:",t),this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t){this.status.loadingItem=t;const l="https://vue3-course-api.hexschool.io/api/wowcowman-api/cart",s={product_id:t,qty:1};this.$http.post(l,{data:s}).then((t=>{this.status.loadingItem="",console.log(t.data)}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/wowcowman-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{console.log(t),this.cart=t.data.data,this.isLoading=!1}))}},created(){this.getProducts(),this.getCart()}},E=s(89);const F=(0,E.Z)(B,[["render",A]]);var G=F}}]);
//# sourceMappingURL=118.a6289d8a.js.map